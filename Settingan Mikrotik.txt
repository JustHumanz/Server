Settingan Mikrotik

#GGC-Telkom
ip firewall address-list
add list=ggc-telkom address=36.64.0.0/16
add list=ggc-telkom address=36.65.0.0/16
add list=ggc-telkom address=36.66.0.0/16
add list=ggc-telkom address=36.67.0.0/16
add list=ggc-telkom address=36.68.0.0/16
add list=ggc-telkom address=36.69.0.0/16
add list=ggc-telkom address=36.70.0.0/16
add list=ggc-telkom address=36.71.0.0/16
add list=ggc-telkom address=36.72.0.0/16
add list=ggc-telkom address=36.73.0.0/16
add list=ggc-telkom address=36.74.0.0/16
add list=ggc-telkom address=36.75.0.0/16
add list=ggc-telkom address=36.76.0.0/16
add list=ggc-telkom address=36.77.0.0/16
add list=ggc-telkom address=36.78.0.0/16
add list=ggc-telkom address=36.79.0.0/16
add list=ggc-telkom address=36.80.0.0/16
add list=ggc-telkom address=36.81.0.0/16
add list=ggc-telkom address=36.82.0.0/16
add list=ggc-telkom address=36.83.0.0/16
add list=ggc-telkom address=36.84.0.0/16
add list=ggc-telkom address=36.85.0.0/16
add list=ggc-telkom address=36.86.0.0/16
add list=ggc-telkom address=36.87.0.0/16
add list=ggc-telkom address=36.88.0.0/16
add list=ggc-telkom address=36.89.0.0/16
add list=ggc-telkom address=36.90.0.0/16
add list=ggc-telkom address=61.5.0.0/17
add list=ggc-telkom address=61.94.0.0/16
add list=ggc-telkom address=110.136.0.0/16
add list=ggc-telkom address=110.137.0.0/16
add list=ggc-telkom address=110.138.0.0/16
add list=ggc-telkom address=110.139.0.0/16
add list=ggc-telkom address=118.96.0.0/16
add list=ggc-telkom address=118.97.0.0/16
add list=ggc-telkom address=118.98.0.0/17
add list=ggc-telkom address=125.160.0.0/16
add list=ggc-telkom address=125.162.0.0/16
add list=ggc-telkom address=125.164.0.0/16
add list=ggc-telkom address=125.165.0.0/16
add list=ggc-telkom address=125.167.0.0/16
add list=ggc-telkom address=180.241.0.0/16
add list=ggc-telkom address=180.242.0.0/16
add list=ggc-telkom address=180.243.0.0/16
add list=ggc-telkom address=180.244.0.0/16
add list=ggc-telkom address=180.245.0.0/16
add list=ggc-telkom address=180.246.0.0/16
add list=ggc-telkom address=180.247.0.0/16
add list=ggc-telkom address=180.248.0.0/16
add list=ggc-telkom address=180.249.0.0/16
add list=ggc-telkom address=180.250.0.0/16
add list=ggc-telkom address=180.251.0.0/16
add list=ggc-telkom address=180.252.0.0/16
add list=ggc-telkom address=180.253.0.0/16
add list=ggc-telkom address=180.254.0.0/16
add list=ggc-telkom address=222.124.0.0/16


/ip firewall mangle
add action=mark-connection chain=prerouting comment=Koneksi-GGC dst-address-list=ggc-telkom new-connection-mark=koneksi-ggc passthrough=yes
add action=mark-packet chain=prerouting connection-mark=koneksi-ggc new-packet-mark=paket-ggc passthrough=no



#Block Windows update
/ip firewall layer7-protocol
add name=block-update-ms regexp=".(stats|ntservicepack|update|download|windowsup\
    date|v4.windowsupdate).(microsoft|windowsupdate)"
add name=block-update-msw regexp=".(wustat|ws|v4.windowsupdate.microsoft|windows\
    update.microsoft).(nsatc|windows|microsoft)"

/ip firewall filter
add action=drop chain=forward comment=Block-Update-Windows layer7-protocol=\
    block-update-ms
add action=drop chain=forward layer7-protocol=block-update-msw

#QOS
**buat ip localnya dulu gan,sesuaikan dengan subnet jaringan agan 
/ip firewall address-list
add address=(subnet ip ente) list=private-lokal

*Game Online(War thunder dan ML)
/ip firewall raw
add action=add-dst-to-address-list address-list=games address-list-timeout=\
none-dynamic chain=prerouting comment="Mobile Legends" dst-address-list=\
!private-lokal dst-port=30000-30150 protocol=tcp src-address-list=\
private-lokal
add action=add-dst-to-address-list address-list=games address-list-timeout=\
none-dynamic chain=prerouting comment="Mobile Legends" content=\
.youngjoygame.com dst-address-list=!private-lokal src-address-list=\
private-lokal

add action=add-dst-to-address-list address-list=games address-list-timeout=\
none-dynamic chain=prerouting comment="War Thunder" dst-address-list=\
!private-lokal dst-port=7800-7802,7850-7854 protocol=tcp src-address-list=\
private-lokal
add action=add-dst-to-address-list address-list=games address-list-timeout=\
none-dynamic chain=prerouting comment="War thunder" dst-address-list=!private-lokal src-address-list=\
private-lokal

*IG
/ip firewall raw
add action=add-dst-to-address-list address-list=sosmed address-list-timeout=\
none-dynamic chain=prerouting comment=ig content=.cdninstagram.com \
dst-address-list=!private-lokal src-address-list=private-lokal
add action=add-dst-to-address-list address-list=sosmed address-list-timeout=\
none-dynamic chain=prerouting comment=ig content=.instagram.com \
dst-address-list=!private-lokal src-address-list=private-lokal

*FB
/ip firewall raw
add action=add-dst-to-address-list address-list=sosmed address-list-timeout=\
none-dynamic chain=prerouting comment=fb content=.facebook.com \
dst-address-list=!private-lokal src-address-list=private-lokal
add action=add-dst-to-address-list address-list=sosmed address-list-timeout=\
none-dynamic chain=prerouting comment=fb content=.facebook.net \
dst-address-list=!private-lokal src-address-list=private-lokal
add action=add-dst-to-address-list address-list=sosmed address-list-timeout=\
none-dynamic chain=prerouting comment=fb content=.fbcdn.net \
dst-address-list=!private-lokal src-address-list=private-lokal

*jika sudah kita buat firewall mangelnya

/ip firewall mangle
add action=mark-connection chain=prerouting comment=private-lokal \
dst-address-list=private-lokal new-connection-mark=private-lokal \
passthrough=yes src-address-list=private-lokal
add action=accept chain=prerouting comment=private-lokal connection-mark=\
private-lokal dst-address-list=private-lokal src-address-list=\
private-lokal
add action=mark-connection chain=prerouting comment=vip dst-address-list=\
!private-lokal new-connection-mark=vip passthrough=yes protocol=icmp \
src-address-list=private-lokal
add action=mark-connection chain=prerouting comment=dns dst-address-list=\
!private-lokal dst-port=53,5353,123,1194 new-connection-mark=vip \
passthrough=yes protocol=tcp src-address-list=private-lokal
add action=mark-connection chain=prerouting comment=dns dst-address-list=\
!private-lokal dst-port=53,5353,123,1194 new-connection-mark=vip \
passthrough=yes protocol=udp src-address-list=private-lokal
add action=accept chain=prerouting comment=vip connection-mark=vip
add action=mark-connection chain=prerouting comment=games dst-address-list=\
games new-connection-mark=games passthrough=yes src-address-list=\
private-lokal
add action=accept chain=prerouting comment=games connection-mark=games
add action=mark-connection chain=prerouting comment=sosmed dst-address-list=\
sosmed new-connection-mark=sosmed passthrough=yes src-address-list=\
private-lokal
add action=accept chain=prerouting comment=sosmed connection-mark=sosmed

##DNS free IPO
/ip dns
set allow-remote-requests=yes servers=208.67.222.222,208.67.220.220
/ip firewall nat
add action=dst-nat chain=dstnat comment=OpenDNS dst-port=53,5353 protocol=udp to-addresses=208.67.222.222 to-ports=5353

